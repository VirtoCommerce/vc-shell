# v2.0.0
name: Vendor Portal CI

on:
  workflow_dispatch:
  push:
    paths-ignore:
      - '.github/**'
      - 'docs/**'
      - 'build/**'
      - 'README.md'
      - 'LICENSEs'
    branches:
      [dev]

jobs:
  CI:
    runs-on: ubuntu-20.04

    env:
      GITHUB_TOKEN: ${{ secrets.REPO_TOKEN }}
      NPM_TOKEN: ${{ secrets.NPM_TOKEN }}

    steps:

      - name: Add auth token
        shell: bash
        run: |
          ls && yarn config set --json npmRegistries '{ "//registry.npmjs.org": { "npmAuthToken": "'"${NPM_TOKEN}"'" } }' && cat .yarnrc.yml
        env:
          NPM_TOKEN: ${{ env.NPM_TOKEN }}

      - name: Build VirtoCommerce.MarketplaceVendor
        run: |
          gh workflow run module-ci.yml --repo VirtoCommerce/vc-module-marketplace-vendor --ref ${{ github.ref }}
