# üîç MCP Debug Logging Guide

## –ö–∞–∫ —É–≤–∏–¥–µ—Ç—å live debug —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Claude Code –≤ Cursor

### üìã –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é MCP –≤ Cursor:**
   ```bash
   # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
   cp cursor-mcp-config.json ~/.cursor/mcp.json
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Cursor** (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä–æ–π—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Å–Ω–æ–≤–∞)

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ watcher –¥–ª—è –ª–æ–≥–æ–≤:**
   ```bash
   ./watch-mcp-logs.sh
   ```

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Claude Code** - –≤—Å–µ –≤—ã–∑–æ–≤—ã MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –±—É–¥—É—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!

---

## üìç –ì–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ª–æ–≥–∏?

### 1. **Live Debug Log** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **–ü—É—Ç—å:** `/tmp/mcp-debug.log`
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:** –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –≤—ã–∑–æ–≤–æ–≤ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- **–ü—Ä–æ—Å–º–æ—Ç—Ä:**
  ```bash
  # –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
  ./watch-mcp-logs.sh

  # –ü—Ä–æ—Å—Ç–æ–π tail
  tail -f /tmp/mcp-debug.log

  # –ü–æ–∏—Å–∫ –ø–æ –ª–æ–≥–∞–º
  grep "search_components" /tmp/mcp-debug.log

  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
  tail -100 /tmp/mcp-debug.log
  ```

### 2. **Metrics JSON** (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- **–ü—É—Ç—å:** `cli/ai-codegen/.mcp-metrics.json`
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, workflow
- **–ü—Ä–æ—Å–º–æ—Ç—Ä:**
  ```bash
  cat .mcp-metrics.json | jq .
  ```

### 3. **Cursor IDE Output** (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ)
‚ö†Ô∏è –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Claude Code extension, –ª–æ–≥–∏ **–ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º Output –ø–∞–Ω–µ–ª–∏ Cursor.
–ü–æ—ç—Ç–æ–º—É –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∞–π–ª–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## üìä –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö?

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞ –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:

```
[MCP DEBUG 2025-01-19T17:10:23.456Z]
============================================================
[MCP DEBUG 2025-01-19T17:10:23.456Z] Tool call: search_components
[MCP DEBUG 2025-01-19T17:10:23.457Z] Arguments: {
  "query": "table",
  "limit": 10
}
[MCP DEBUG 2025-01-19T17:10:23.458Z]
============================================================
[MCP DEBUG 2025-01-19T17:10:23.473Z] ‚úì Tool completed successfully: search_components
```

### –¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –≤ watcher:

- üîµ **Cyan** - Tool call (–≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞)
- üü¢ **Green** - Success (—É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
- üî¥ **Red** - Error (–æ—à–∏–±–∫–∞)
- üü° **Yellow** - Arguments (–∞—Ä–≥—É–º–µ–Ω—Ç—ã)
- üü£ **Magenta** - Separators (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏)

---

## üîé –ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è?

–í—Å–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –≤–∫–ª—é—á–∞—è:

### Discovery (–ø–æ–∏—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
- `search_components` - –ø–æ–∏—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `view_components` - –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- `get_component_examples` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤
- `get_component_capabilities` - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- `search_components_by_intent` - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫

### Framework APIs
- `search_framework_apis` - –ø–æ–∏—Å–∫ API —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
- `view_framework_apis` - –¥–µ—Ç–∞–ª–∏ API
- `get_framework_capabilities` - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API
- `get_framework_examples` - –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### Workflow (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞)
- `analyze_prompt_v2` - –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–º–ø—Ç–∞
- `create_ui_plan_from_analysis_v2` - —Å–æ–∑–¥–∞–Ω–∏–µ UI-Plan
- `validate_ui_plan` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–ª–∞–Ω–∞
- `generate_with_composition` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è –∫–æ–¥–∞
- `submit_generated_code` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—é

---

## üõ†Ô∏è Troubleshooting

### –õ–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è?

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MCP —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω:**
   ```bash
   ps aux | grep "vcshell.*mcp" | grep -v grep
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ debug mode –≤–∫–ª—é—á–µ–Ω:**
   ```bash
   cat ~/.cursor/mcp.json | grep DEBUG_MCP
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "DEBUG_MCP": "true"
   ```

3. **–£–±–µ–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã MCP –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Cursor:**
   ```bash
   pkill -f "vcshell.*mcp"
   # –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Cursor
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ /tmp:**
   ```bash
   touch /tmp/mcp-debug.log
   echo "test" >> /tmp/mcp-debug.log
   ```

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–≥–æ–≤?

–ï—Å–ª–∏ –ª–æ–≥–æ–≤ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ, –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤:

```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ mcp.ts –∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É:
# debugLog(`Arguments:`, JSON.stringify(args, null, 2));
```

---

## üìà –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

```bash
cat .mcp-metrics.json | jq '.toolStats'
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä workflow –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

```bash
cat .mcp-metrics.json | jq '.workflow'
```

### –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

```bash
cat .mcp-metrics.json | jq '.toolStats[] | {name: .name, avgDuration: .avgDuration}'
```

---

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ production

–î–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è **–æ—Ç–∫–ª—é—á–∏—Ç–µ** debug mode:

```json
{
  "mcpServers": {
    "vcshell-codegen": {
      "command": "node",
      "args": [
        "/Users/symbot/DEV/vc-shell/cli/ai-codegen/dist/index.js",
        "mcp"
      ],
      "env": {
        "DEBUG_MCP": "false",
        "MCP_METRICS_FILE": "/Users/symbot/DEV/vc-shell/cli/ai-codegen/.mcp-metrics.json"
      },
      "description": "VC-Shell AI Code Generation"
    }
  }
}
```

Metrics –±—É–¥–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è, –Ω–æ –±–µ–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Ñ–∞–π–ª.

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **Metrics tracker:** `cli/ai-codegen/src/commands/mcp/mcp-metrics.ts`
- **MCP server:** `cli/ai-codegen/src/commands/mcp.ts`
- **Workflow orchestrator:** `cli/ai-codegen/src/commands/mcp/workflow-orchestrator.ts`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Claude Code –≤ Cursor, MCP —Å–µ—Ä–≤–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–∞–∫ background processes,
–ø–æ—ç—Ç–æ–º—É stderr/stdout –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ IDE. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ!
